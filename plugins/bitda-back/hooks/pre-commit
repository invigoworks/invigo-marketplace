#!/bin/bash
# Pre-commit hook: staged .kt íŒŒì¼ì´ ìžˆì„ ë•Œë§Œ ë¹Œë“œ ê²€ì¦

KT_FILES=$(git diff --cached --name-only --diff-filter=ACMR | grep '\.kt$' || true)

if [[ -z "$KT_FILES" ]]; then
  # .kt ë³€ê²½ ì—†ìŒ â†’ ë¹Œë“œ ìŠ¤í‚µ
  exit 0
fi

echo "ðŸ”¨ Kotlin íŒŒì¼ ë³€ê²½ ê°ì§€ â€” ë¹Œë“œ ê²€ì¦ ì¤‘..."
./gradlew build 2>&1 | tail -20

exit ${PIPESTATUS[0]}
